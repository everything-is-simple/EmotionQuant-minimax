# 路线图"内功深厚但无招式"问题分析

## 结论：你说得对，但问题比你想的更具体

你的直觉非常准。路线图确实存在**"能力积累 → 能力使用"的断裂**，但这个问题不是笼统的，而是体现在 **3 个非常具体的结构性裂缝** 上。

---

## 1. 三大裂缝全景

```
             能力建设                     能力使用
  ┌──────────────────────┐     ┌──────────────────────┐
  │  S0 数据闭环          │     │  被谁用？怎么验证？    │
  │  S1 MSS 六因子        │ →→→ │  要到 S3 回测才知道    │ ← 裂缝①
  │  S2 IRS+PAS+Gate+Int │     │  信号是否有效          │
  └──────────────────────┘     └──────────────────────┘

  ┌──────────────────────┐     ┌──────────────────────┐
  │  S3 回测器            │     │  回测完了？然后呢？    │
  │  S4 纸上交易          │ →→→ │  用户无法 SEE 结果    │ ← 裂缝②
  │  (全链路能跑)         │     │  直到 S5 才有 GUI     │
  └──────────────────────┘     └──────────────────────┘

  ┌──────────────────────┐     ┌──────────────────────┐
  │  S2 Validation Gate  │     │  Gate 说 PASS/FAIL    │
  │  S3 A/B/C 对照       │ →→→ │  然后？没有反馈环路    │ ← 裂缝③
  │  S6 权重对照          │     │  权重从不自动调整      │
  └──────────────────────┘     └──────────────────────┘
```

---

## 2. 裂缝逐条分析

### 裂缝① 信号建了但"不知好坏"—— 反馈滞后 3 个 Spiral

| Spiral | 建了什么能力 | 何时才知道这个能力是否有效 |
|--------|-------------|-------------------------|
| S1 | MSS 温度/周期/趋势 | **S3** 回测才会产出 performance_metrics |
| S2 | IRS 行业评分 | **S3** 回测才检验选行业对不对 |
| S2 | PAS 个股评分 | **S3** 回测才检验选股对不对 |
| S2 | Integration 集成推荐 | **S3** 回测才检验推荐组合收益 |

> **武林比喻**: 练了三年内功（S0-S2），从没跟人过招。S3 才让你第一次上擂台。万一发现内功路线练错了呢？**返工成本巨大**——你要回到 S1/S2 改算法，但 S3 之后的 S4/S5/S6 都依赖 S2 产出，一推全倒。

**根因**: S1/S2 的验收门禁只检查"形式正确"（温度在 [0,100]、覆盖 31 行业），**从不检验"语义有效"**（这些信号能不能挣钱、能不能区分好坏股）。

---

### 裂缝② 结果能算但"看不见"—— 可见性延迟

| 时间线 | 能力状态 | 用户体验 |
|--------|---------|---------|
| S0-S2 完成 | 信号全链路能跑 | 只有 CLI + Parquet 文件，**用户只能 stare at numbers** |
| S3 完成 | 回测能跑，绩效指标能算 | 输出仍是表和文件，**无可视化** |
| S4 完成 | 纸上交易全链路能模拟 | 交易记录在数据库里，**看不到** |
| **S5 才开始** | Streamlit Dashboard 启动 | 终于能"看见"系统 |

> **武林比喻**: 练成绝世内功，但没有眼睛（S5 GUI）。前 4 个 Spiral 你练功的反馈全靠"体感"（命令行日志），不知道劲力到底如何分布。

**根因**: 路线图把 GUI 放到倒数第二圈。但实际上，**数据可视化是最重要的调试和理解工具**，而不仅仅是"展示层"。

---

### 裂缝③ 检验体系建了但"没有闭环"—— 单向门禁，无反馈回路

路线图有以下检验机制：

| 检验能力 | 建于 | 产出 | **然后呢？** |
|---------|------|------|------------|
| Validation Gate | S2 | PASS / WARN / FAIL | ⚠️ 只阻断，**不告诉你怎么改** |
| A/B/C 对照 | S3 | 对照报表 | ⚠️ 报表生成就结束了，**不驱动任何行为** |
| 权重对照 | S6 | baseline vs candidate | ⚠️ 如果 candidate 不好就回退 baseline，**没有迭代策略** |

> **武林比喻**: 你有一个裁判（Validation Gate）能告诉你输了，但没有师父能告诉你怎么改拳路。有一面镜子（A/B/C 对照）能让你看到打拳的样子，但没有招法书（反馈→调参→重验闭环）。

**根因**: 路线图是**单程火车**（S0→S1→S2→...→S6），缺少**回旋镖机制**（检验结果 → 自动触发上游修正）。

---

## 3. 更深层的结构问题

### 3.1 能力建设与能力使用的时间错配矩阵

```
           建设期         使用期         间隔
MSS温度    S1 (第2圈)     S3回测 (第4圈)   2圈 ⚠️
IRS行业    S2 (第3圈)     S3回测 (第4圈)   1圈 ✅
PAS个股    S2 (第3圈)     S3回测 (第4圈)   1圈 ✅
Integration S2 (第3圈)    S3回测 (第4圈)   1圈 ✅
回测引擎   S3 (第4圈)     S4口径验证(第5圈) 1圈 ✅
GUI        S5 (第6圈)     S5自己 (第6圈)   0圈 ✅  但太晚了
Validation  S2 (第3圈)    S6权重对照(第7圈) 4圈 🔴 严重！
```

> **Validation 是路线图中最被低估的能力**。它在 S2 建立，但真正发挥作用（驱动权重决策）要到 S6。中间 4 个 Spiral 它只充当了一个"通过/不通过"的门卫，而没有作为一个"信号质量教练"持续发挥价值。

### 3.2 路线图缺失的"使用场景清单"

每个 Spiral 的五件套要求只有 `run`/`test`/`artifact`/`review`/`sync`，**全部是面向"证明能力存在"的证据**，而不是面向"能力被使用"的场景。

路线图应该为每个能力包回答一个问题：**"这个能力建完后，在下一个 Spiral 中，谁在什么场景下以什么频率使用它？"** 目前路线图只有遗产链（谁产出什么表），缺少消费链的频率和使用方式。

---

## 4. 具体建议（如果你想修路线图的话）

### 建议① 在 S1/S2 增加"微型回测"验证步

> 不需要等到 S3 才第一次验证信号。

- **S1** 增加一个 T-Task：用最近 20 天 MSS 温度做一个**极简回溯**（不是完整回测），看温度高低与大盘涨跌是否有关联。这不需要回测引擎，只需要一个 notebook 或脚本。
- **S2** 增加一个 T-Task：用 IRS+PAS 输出做一个**单日截面 TopN vs Bottom 对比**，看推荐的前 10 名和后 10 名未来 5 天收益是否有方向差异。

**成本**: 每个 ~0.3d，总计 ~0.6d
**收益**: 将"信号是否有用"的反馈从 S3 提前到 S1/S2，减少 2 圈返工风险

### 建议② 将可视化前移到 S3（轻量版）

> 不需要等到 S5 才让结果可见。

- **S3** 完成回测后，增加一个 T-Task：用 Matplotlib 或 Streamlit 输出**一张净值曲线图 + 一个基础指标表**。不需要完整 Dashboard，只需要让你能"看到"策略表现。
- 这个 0.3d 的投入可以让你在 S4（纸上交易）之前就有视觉反馈，而不是等到 S5 才看到。

### 建议③ 为 Validation 增加"处方"角色

> 门禁不能只说 FAIL，还要告诉你为什么 FAIL 以及怎么修。

- `validation_gate_decision` 目前只有 `PASS / WARN / FAIL + reason`
- 建议增加 `suggestion` 字段：当 Gate=WARN 时，给出具体建议（例如"IC 过低，建议检查因子 X 的数据质量"或"样本不足，建议扩大回看窗口"）
- 这让 Validation 从一个"裁判"变成一个"教练"

### 建议④ 增加 Spiral 间"微循环"机制

> 不是只能 S0→S1→S2→...→S6 单向走。

```
当前路线:  S0 ─→ S1 ─→ S2 ─→ S3 ─→ S4 ─→ S5 ─→ S6

建议增加:  S0 ─→ S1 ─→ S2 ─→ S3 ─→ S4 ─→ S5 ─→ S6
                  ↑         │
                  └─ 微循环 ─┘  (如果 S3 回测验证信号无效)
```

- 在 S3 验收门禁中增加一条：**如果回测 Sharpe < 阈值，触发 S1/S2 微修正子圈**
- 微修正子圈不需要完整重走 S1/S2，只需要针对性调整并重跑

---

## 5. 一句话总结

路线图像一本**武功心法**——从根基到顶峰，层层递进，逻辑严密。但它缺少一本**拳法套路图**——每招练成后，在哪里用、对谁用、用得好不好怎么判断。

**内功（能力建设）**: ✅ 路线图做得很好
**招式（能力使用）**: ⚠️ 路线图几乎没有涉及
**实战（反馈闭环）**: 🔴 路线图完全缺失
