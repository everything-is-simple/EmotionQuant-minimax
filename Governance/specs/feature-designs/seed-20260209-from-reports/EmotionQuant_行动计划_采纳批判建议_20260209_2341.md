# EmotionQuant 行动计划（采纳批判建议）

## 0. 文档信息
- 文档版本：v1.0
- 文档日期：2026-02-09
- 项目：`EmotionQuant_beta`
- 依据报告：
  - `.reports/对标开源A股量化系统批判_20260209_150147.md`
  - `.reports/对标开源A股量化系统批判_修订版_20260209.md`

## 1. 署名信息
- 发起负责人：`<请填写负责人姓名>`
- 执行负责人：`<请填写执行人姓名>`
- 编制：`Codex`
- 模型：`GPT-5 Codex`
- 生成时间：`2026-02-09 23:41:04 +08:00`

## 2. 执行边界（冻结区）
1. 不改情绪优先主逻辑。
2. 不改 MSS/IRS/PAS + Validation 核心语义。
3. 不改 Spiral + CP 主路线。
4. 只改运行入口、生态适配、证据产物。

## 3. 10天目标（D1-D10）
把系统从“设计闭环”推进到“可运行、可验证、可复盘”的工程闭环：
1. 新人 10 分钟内可跑通最小链路。
2. 每次运行都产出 L4 证据文件。
3. 失败时也能定位问题（error manifest）。

## 4. Spiral 执行计划

### Spiral-A（D1-D4）：先跑起来
1. 任务 A1：`eq run --date YYYYMMDD` 最小闭环（L1->L4）
- 输出：统一 CLI 入口与最小配置
- 验收命令：`eq run --date 20260131`
- 测试：新增 CLI 冒烟测试 1 条
- 产物：L4 三件套（温度曲线、推荐列表、行业权重）

2. 任务 A2：AKShare 最小数据适配
- 输出：`data_adapter_akshare.py`（OHLCV + trade_calendar）
- 验收命令：`pytest -k akshare_adapter`
- 测试：字段映射与缺失补采测试
- 产物：补采日志 + 入库快照

3. 任务 A3：失败可复盘协议
- 输出：`error_manifest.json` + `last_input_snapshot`
- 验收命令：`pytest -k error_manifest`
- 测试：关键步骤故障注入测试
- 产物：失败样例包 1 份

### Spiral-B（D5-D10）：先证明有效
1. 任务 B1：回测桥接（L3 推荐 -> 回测引擎）
- 输出：`rqalpha_adapter` 或通用 backtest adapter
- 验收命令：`pytest -k backtest_adapter`
- 测试：输入映射、结果回写 L4
- 产物：A/B/C 对照指标表（夏普、回撤、换手、胜率、交易次数）

2. 任务 B2：交易薄适配壳（先 mock/paper）
- 输出：`trading_adapters/`：`submit_order/cancel_order/query_position`
- 验收命令：`pytest -k trading_adapter`
- 测试：接口契约与异常路径
- 产物：paper trading 日志

3. 任务 B3：10天小样本回归包
- 输出：`.sample/eq-mini-YYYYMMDD_YYYYMMDD`
- 验收命令：`pytest -k mini_regression`
- 测试：固定样本可复现
- 产物：回归报告（通过/失败差异）

## 5. 门禁与升级规则
1. 默认工作流：`Scope -> Build -> Verify -> Sync`。
2. 命中以下任一项，升级 Strict 6A：
- 交易执行路径重大改动
- 风控规则重大改动
- 数据契约破坏性变更
- 新外部依赖影响主流程

## 6. 每个 Task 的收口清单（必须）
1. `run` 命令成功。
2. `test` 命令成功。
3. `artifact` 可检查。
4. `review` 已记录偏差/风险。
5. `sync` 已更新最小文档集。

## 7. 今日立即动作（按顺序）
1. 立项 `A1`：先实现 `eq run` 最小闭环。
2. 同步实现 `A2`：AKShare 最小字段适配。
3. 完成 `A3`：失败产物协议，保证可复盘。

## 8. 签署
- 负责人签名：`____________________`
- 执行签名：`____________________`
- 确认日期：`____-__-__`
